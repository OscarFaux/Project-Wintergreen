<!-- 
Title: Integrated Hardsuit Controller
Used In File(s): /code/modules/clothing/spacesuits/rig/rig.dm
 -->

<style type="text/css">
	.inlineBlock {
	  padding: 2px; 
	  display: inline-block;
	}
	.extraPadding {
	  padding-top: 10px;
	}
	.offsetCenter {
		width: 90%;
		margin: 0 auto;
	}
	.info {
		width: 100px;
	}
	.floatLeft {
		float: left;
		margin-left: 5px;
	}
	.paddedBorderBlue {
		border: 1px solid #517087; 
		padding: 2px;
	}
	.displayBar {
		width: 200px;
	}
</style>

{{if data.interfacelock || data.malf > 0}}
	<font color='red' align='center'><strong>-- HARDSUIT INTERFACE OFFLINE --</strong></font>
{{else}}
	{{if data.aicontrol && data.ai != 1}}
		<font color='red' align='center'><strong>-- HARDSUIT CONTROL OVERRIDDEN BY AI --</strong></font>
	{{else}}
		<div>
			<div class='inlineBlock extraPadding'>
				<div class='fixedLeft'>
					<strong>Power supply</strong>
				</div>
				<div>
					{{:helper.displayBar(data.chargestatus, 0, 50, (data.chargestatus >= 35) ? 'good' : (data.chargestatus >= 15) ? 'average' : 'bad')}} {{:data.charge}}/{{:data.maxcharge}}
				</div>
				
			</div>
			<div>
				<div class='inlineBlock extraPadding'>
					<div class='fixedLeft'>
						<strong>AI control:</strong>
					</div>
					<div class='fixedLeft'>
						{{if data.aioverride}}
							<font color = 'green'><strong>ENABLED</strong></font>
						{{else}}
							<font color = 'red'><strong>DISABLED</strong></font>
						{{/if}}
					</div>
					<div class='fixedLeft'>
						{{:helper.link('Toggle', 'circle-arrow-s', {'toggle_ai_control' : 1}, null)}}
					</div>
				</div>
				<div class='inlineBlock'>
					<div class='fixedLeft'>
						<strong>Suit status:</strong>
					</div>
					<div class='fixedLeft'>
						{{if data.sealing == 1}}
							<font color = 'orange'><strong>SEALING</strong></font>
						{{else}}
							{{if data.seals == 1}}
								<font color = 'red'><strong>OPEN</strong></font>
							{{else}}
								<font color = 'green'><strong>SEALED</strong></font>
							{{/if}}
						{{/if}}
					</div>
					<div class='fixedLeft'>
						{{:helper.link('Toggle', 'circle-arrow-s', {'toggle_seals' : 1}, null)}}
					</div>
				</div>
				<div class='inlineBlock'>
					<div class='fixedLeft'>
						<strong>Cover status:</strong>
					</div>
					<div class='fixedLeft'>
						{{if data.emagged || !data.securitycheck}}
							<font color = 'orange'><strong>ERROR - MAINTENANCE LOCK CONTROL OFFLINE</strong></font>
						{{else}}
							{{if data.coverlock}}
								<font color = 'red'><strong>LOCKED</strong></font>
							{{else}}
								<font color = 'green'><strong>UNLOCKED</strong></font>
							{{/if}}
						{{/if}}
					</div>
					<div class='fixedLeft'>
						{{:helper.link('Toggle', 'circle-arrow-s', {'toggle_suit_lock' : 1}, null)}}
					</div>
				</div>
			</div>
		</div>

		<h2>Hardware</h2>
		<h3>Suit pieces</h3>

		<div>
			<div class='inlineBlock'>
				<div class='fixedLeft'>
					<b>Helmet:</b>
				</div>
				<div class='fixedLeftWider'>
					{{:helper.capitalizeFirstLetter(data.helmet)}}
				</div>
				{{if data.sealing != 1}}
					<div class='fixedLeft'>
							{{:helper.link('Toggle', 'circle-arrow-s', {'toggle_piece' : 'helmet'}, null)}}
					</div>
				{{/if}}
			</div>
			<div class='inlineBlock'>
				<div class='fixedLeft'>
					<b>Gauntlets:</b>
				</div>
				<div class='fixedLeftWider'>
					{{:helper.capitalizeFirstLetter(data.gauntlets)}}
				</div>
				{{if data.sealing != 1}}
					<div class='fixedLeft'>
						{{:helper.link('Toggle', 'circle-arrow-s', {'toggle_piece' : 'gauntlets'}, null)}}
					</div>
				{{/if}}
			</div>
			<div class='inlineBlock'>
				<div class='fixedLeft'>
					<b>Boots:</b>
				</div>
				<div class='fixedLeftWider'>
					{{:helper.capitalizeFirstLetter(data.boots)}}
				</div>
				{{if data.sealing != 1}}
					<div class='fixedLeft'>
						{{:helper.link('Toggle', 'circle-arrow-s', {'toggle_piece' : 'boots'}, null)}}
					</div>
				{{/if}}
			</div>
			<div class='inlineBlock'>
				<div class='fixedLeft'>
					<b>Chestpiece:</b>
				</div>
				<div class='fixedLeftWider'>
					{{:helper.capitalizeFirstLetter(data.chest)}}
				</div>
				{{if data.sealing != 1}}
					<div class='fixedLeft'>
						{{:helper.link('Toggle', 'circle-arrow-s', {'toggle_piece' : 'chest'}, null)}}
					</div>
				{{/if}}
			</div>
		</div>

		<h2>System modules</h2>
		{{if data.seals == 1 || data.sealing == 1}}
			<h3><div class = 'bad'>HARDSUIT SYSTEMS OFFLINE</div></h3>
		{{else}}
			<font align = 'center'><h3>Selected primary system: 
				{{if data.primarysystem}}
					{{:helper.capitalizeFirstLetter(data.primarysystem)}}
				{{else}}
					None
				{{/if}}
			</h3></font>
			{{if data.modules}}
				<div>
					{{for data.modules}}
						<div class='inlineBlock'>
							<div class='paddedBorderBlue floatLeft' style='width: 400px'>
								<div class='floatLeft' style='width: 100%'>
									<div class='average floatLeft'>{{:helper.capitalizeFirstLetter(value.name)}}</div>
									{{if value.damage > 0}}
										<div class='floatLeft'>
											{{if value.damage == 1}}
												(<font color='orange'>damaged</font>) 
											{{else}}
												(<font color='red'>destroyed</font>) 
											{{/if}}
										</div>
									{{/if}}
									<div class='floatLeft' style='width: 100%; clear: left'>
										<div class='caption floatLeft average' style='width: 23%; margin: 0'>
												Engage: {{:value.engagecost}} <br>
												Activate: {{:value.activecost}} <br>
												Passive: {{:value.passivecost}} 
										</div>
										<div class='caption floatLeft' style='width: 27%; margin: 0'>
												{{:value.desc}}
										</div>
										<div class='floatLeft' style='width: 40%'>
											{{if value.can_use == 1}}
												<div class='inlineBlock'>
													{{:helper.link(value.engagestring, 'circle-arrow-s', {'interact_module' : value.index, 'module_mode' : 'engage'}, null)}}
												</div>
											{{/if}}
											{{if value.can_select == 1}}
												<div class='inlineBlock'>
													{{if value.name == data.primarysystem}}
														<div class ='good'><strong>SELECTED</strong></div>
													{{else}}
														{{:helper.link('Select', 'circle-arrow-s', {'interact_module' : value.index, 'module_mode' : 'select'}, null)}}
													{{/if}}
												</div>
											{{/if}}
											{{if value.can_toggle == 1}}
												<div class='inlineBlock'>
													{{if value.is_active == 1}}
														{{:helper.link(value.deactivatestring, 'circle-arrow-s', {'interact_module' : value.index, 'module_mode' : 'deactivate'}, null)}}
													{{else}}
														{{:helper.link(value.activatestring, 'circle-arrow-s', {'interact_module' : value.index, 'module_mode' : 'activate'}, null)}}
													{{/if}}
												</div>
											{{/if}}
										</div>
									</div>
								</div>
								<div class='floatLeft' style='clear: left; margin-left: 10px; width: 100%'>
									{{if value.charges}}
										<div class='average'><strong>Stored charges</strong></div>
										<strong>Selected:</strong> {{:helper.capitalizeFirstLetter(value.chargetype)}}
										{{for value.charges :itemValue:itemIndex}}
											<div class='floatLeft' style='padding: 2px 0px'>
												{{:helper.link(helper.capitalizeFirstLetter(itemValue.caption), null, {'interact_module' : value.index, 'module_mode' : 'select_charge_type', 'charge_type' : itemValue.index}, null)}}
											</div>
										{{/for}}
									{{/if}}
								</div>
							</div>
						</div>
					{{/for}}
				</div>
			{{else}}
				None.
			{{/if}}
		{{/if}}
	{{/if}}
{{/if}}